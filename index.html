<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>BENCE Gallery</title>
  <style>
    html, body {
      height: 100%; margin: 0; overflow: hidden;
      font-family: sans-serif;
    }
    #viewport {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #ddd;
    }

    .nav{
        position: fixed;
        height: 100px;
        width: 100%;
        top: 0px;
        left: 0px;
        z-index: 2;
        display: flex;
        justify-content: space-between;
    }
    .nav .logo{
        font-size: 2rem;
        font-weight: bold;
        color: #333;
        margin: 30px;
        letter-spacing: 2px;
    }

    .nav .img{  
        margin: 30px;
        cursor: pointer;
        transition: transform 0.3s ease;
        will-change: transform;
        transform-origin: center;
    }

    .nav .img:hover{
      /* box-shadow: 0 8px 18px rgba(0,0,0,0.12); */
      transform: scale(1.4) !important;
    }

    .main{
        display: flex;
        flex-direction: row;
        /* margin-top: 100px; */
    }
    .details{
        width: 0px;
    }
    
    .details.open{
        border: 1px solid black;
        width: 50vw;
        height: 100vh;
        padding: 20px;
        padding-right: 30px;
        padding-top: 70px;
        padding-left: 30px;
        z-index:1;
        background-color: #dfdfdf;
        position: relative;

    }

    .details h2{
        font-size: 2rem;
        font-weight: 100;
    }

    .close-btn{
        position: absolute;
        top: 100px;
        right: 60px;
        font-size: 2rem;
        font-weight: bold;
        font-weight: bold;
        cursor: pointer;
        font-weight: 100;
        z-index: 3;
    }
    
    .detailed-img{
        width: 100%;
        height: 75vh;
        border: 1px solid black;

        background-image: url("./images/Screenshot\ 2026-01-12\ at\ 17.33.59.png");
        background-position: center;
        background-size: cover ;
    }

    .carousel-nav{
        display: flex;
        justify-content: space-between;
        width: 100%;
        margin-top: 20px;

    }

    .carousel-nav .nav-arrow{
        cursor: pointer;
        font-weight: 100;
    }

    .canvas {
      position: absolute;
      width: 300vw;
      height: 200vh;
      background: #ddd;
      margin-right: 100px;
    }

  


    .item {
      position: absolute;
      width: 0rem;
      height: 0rem;
      /* background-size: cover;
      background-position: center; */
      /* border-radius: 4px; */
      border-radius: 10px;
      /* box-shadow: 0 8px 18px rgba(0,0,0,0.12); */
      cursor: pointer;
      /* border:1px solid #fff; */

      opacity: 0;
      /* transform: scale(0); */
      animation: reveal 0.1s ease forwards;
      animation-delay: calc(var(--i) * 20ms);
      transition: transform 0.3s ease;
      will-change: transform;
      transform-origin: center;
      /* border:1px solid hsl(var(--h), 70%, 60%); */
    }

    .item:hover{
      box-shadow: 0 8px 18px rgba(0,0,0,0.12);
      transform: scale(1.2) !important;

    }

    @keyframes reveal {
        to {
            opacity: 1;
            transform: scale(1.2);
            width: 30rem;
            height: 20rem;
        }
    }   

    .show {
      opacity: 1;
    }

    .plate {
        background-color: hsl(var(--h), 70%, 60%);

        height: var(--g);
        width: var(--g);
        /* background-color: chocolate; */
        border-radius: 5rem;
        position: relative;
        top:  calc(50% - var(--g)/2);
        left:  calc(50% - var(--g)/2);
        z-index: 1;
    }

    @media (max-width: 768px) {
  .canvas {
    padding: 100px 0px 100px 0px;
    width: 600vw;
    height: 150vh;
  }
}

  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
  <div id="viewport">
    <div class="nav">
        <div class="logo">BENCERA</div>
        <div class="img">
            <img src="https://cdn-icons-png.flaticon.com/512/2430/2430422.png" width="40" height="40" alt="" title="" class="img-small">
        </div>
    </div>
    <div class="main">
        <div class="details">
            <div class="close-btn">X</div>
            <h2>DETAILS</h2>
            <div class="detailed-img"></div>
            <div class="carousel-nav">
                <div class="nav-arrow left-arrow">&#8592;</div>
                <div class="nav-arrow right-arrow">&#8594;</div>
            </div>
        </div>

        <div class="canvas" id="canvas">
            <!-- row1 -->
        <div class="item" style="left: 0%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 10%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 20%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 30%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 40%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 50%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 60%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 70%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 80%; top: 0%;"><div class="plate"></div></div>
        <div class="item" style="left: 90%; top: 0%;"><div class="plate"></div></div>

        <!-- row2 -->
        <div class="item" style="left: 5%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 15%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 25%; top: 20%;"><div class="plate"></div></div>  
        <div class="item" style="left: 35%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 45%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 55%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 65%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 75%; top: 20%;"><div class="plate"></div></div>
        <div class="item" style="left: 85%; top: 20%;"><div class="plate"></div></div>  
        <div class="item" style="left: 95%; top: 20%;"><div class="plate"></div></div>
            <!-- row3 -->
        <div class="item" style="left: 0%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 10%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 20%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 30%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 40%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 50%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 60%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 70%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 80%; top: 40%;"><div class="plate"></div></div>
        <div class="item" style="left: 90%; top: 40%;"><div class="plate"></div></div>

            <!-- row4 -->
        <div class="item" style="left: 5%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 15%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 25%; top: 60%;"><div class="plate"></div></div>  
        <div class="item" style="left: 35%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 45%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 55%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 65%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 75%; top: 60%;"><div class="plate"></div></div>
        <div class="item" style="left: 85%; top: 60%;"><div class="plate"></div></div>  
        <div class="item" style="left: 95%; top: 60%;"><div class="plate"></div></div> 
            <!-- row5 -->
        <div class="item" style="left: 0%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 10%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 20%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 30%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 40%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 50%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 60%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 70%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 80%; top: 80%;"><div class="plate"></div></div>
        <div class="item" style="left: 90%; top: 80%;"><div class="plate"></div></div>
        </div>
    </div>
  </div>

<script>
  gsap.registerPlugin(ScrollTrigger);

  const viewport = document.getElementById("viewport");
  const canvas = document.getElementById("canvas");

  let vw = window.innerWidth;
  let vh = window.innerHeight;

  const canvasWidth = vw * 3;
  const canvasHeight = vh * 2;

  let pos = { x: 0, y: 0 };
  let vel = { x: 0, y: 0 };
  let isDown = false;
  let startX = 0, startY = 0;

  let currentScale = 1;
  const maxScale = 3;

  const friction = 0.92;
  const parallaxStrength = 0.15;

  /* ============================================================
      DYNAMIC MIN SCALE (never shows edges)
  ============================================================ */
  function getMinScale() {
    return Math.max(
      (vw / canvasWidth)+ 0.4,
      (vh / canvasHeight) + 0.4
    );
  }

  /* ============================================================
      CENTER CANVAS
  ============================================================ */
  function centerCanvas() {
    vw = window.innerWidth;
    vh = window.innerHeight;

    const minScale = getMinScale();
    currentScale = Math.max(currentScale, minScale);

    const scaledWidth = canvasWidth * currentScale;
    const scaledHeight = canvasHeight * currentScale;

    pos.x = (scaledWidth - vw) / 2.6;
    pos.y = (scaledHeight - vh) / 2.5;

    applyBounds();

    gsap.set(canvas, {
      x: -pos.x,
      y: -pos.y,
      scale: currentScale
    });
  }

  window.addEventListener("load", centerCanvas);

  /* ============================================================
      BOUNDARIES
  ============================================================ */
  function applyBounds() {
    const scaledWidth = canvasWidth * currentScale;
    const scaledHeight = canvasHeight * currentScale;

    const maxX = scaledWidth - vw;
    const maxY = scaledHeight - vh;

    pos.x = Math.min(Math.max(pos.x, 0), maxX);
    pos.y = Math.min(Math.max(pos.y, 0), maxY);
  }

  /* ============================================================
      PARALLAX
  ============================================================ */
  function applyParallax() {
    document.querySelectorAll(".item").forEach(el => {
      const depth = parseFloat(el.dataset.depth || 1);
      const px = -(pos.x * parallaxStrength * depth);
      const py = -(pos.y * parallaxStrength * depth);
      el.style.transform = `translate(${px}px, ${py}px)`;
    });
  }

  /* ============================================================
      DRAG HANDLERS
  ============================================================ */
  function pointerDown(e) {
    isDown = true;
    const p = e.touches ? e.touches[0] : e;

    startX = p.clientX + pos.x;
    startY = p.clientY + pos.y;

    vel.x = 0;
    vel.y = 0;

    canvas.style.cursor = "grabbing";
  }

  function pointerUp() {
    isDown = false;
    canvas.style.cursor = "";
  }

  function pointerMove(e) {
    if (!isDown) return;

    const p = e.touches ? e.touches[0] : e;
    const newX = startX - p.clientX;
    const newY = startY - p.clientY;

    vel.x = newX - pos.x;
    vel.y = newY - pos.y;

    pos.x = newX;
    pos.y = newY;

    applyBounds();

    gsap.to(canvas, {
      x: -pos.x,
      y: -pos.y,
      duration: 0.15,
      ease: "power2.out"
    });

    applyParallax();
  }

  /* ============================================================
      INERTIA LOOP
  ============================================================ */
  function animate() {
    if (!isDown) {
      pos.x += vel.x;
      pos.y += vel.y;

      vel.x *= friction;
      vel.y *= friction;

      applyBounds();

      gsap.set(canvas, { x: -pos.x, y: -pos.y });
      applyParallax();
    }
    requestAnimationFrame(animate);
  }
  animate();

  /* ============================================================
      ZOOM TOWARD CURSOR
  ============================================================ */
  function zoom(e) {
    e.preventDefault();

    const rect = viewport.getBoundingClientRect();
    const cx = e.clientX - rect.left;
    const cy = e.clientY - rect.top;

    const oldScale = currentScale;
    const minScale = getMinScale();

    let newScale = currentScale - e.deltaY * 0.001;
    newScale = Math.min(Math.max(newScale, minScale), maxScale);

    const scaleFactor = newScale / oldScale;

    pos.x = cx + (pos.x - cx) * scaleFactor;
    pos.y = cy + (pos.y - cy) * scaleFactor;

    currentScale = newScale;

    applyBounds();

    gsap.to(canvas, {
      scale: currentScale,
      x: -pos.x,
      y: -pos.y,
      duration: 0.25,
      ease: "power2.out"
    });

    applyParallax();
  }


  /* ============================================================
      randomy shuffle function
  ============================================================ */
  function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

  /* ============================================================
      EVENTS
  ============================================================ */

    let items = [...document.querySelectorAll(".item")];
    let shuffledItems = shuffle(items);
    shuffledItems.forEach((item, index) => {
        const rcol = Math.floor(Math.random() * 360);
        item.style.setProperty("--h", rcol);
        item.style.setProperty("--i", index);
        item.addEventListener("click", () => {
            let detailsContainer = document.querySelector(".details");
            detailsContainer.classList.add("open");
        });
    });

    let closeBtn = document.querySelector(".close-btn");
    console.log("close btn:", closeBtn);
    closeBtn.addEventListener("click", () => {
        console.log("close btn clicked");
        let detailsContainer = document.querySelector(".details");
        console.log("clicked close");
        detailsContainer.classList.remove("open");
    });


    document.querySelectorAll(".plate").forEach(plate => {
        const hue = Math.floor(Math.random() * 360);
        const size = Math.floor(Math.random() * 100) + 50; // Random size between 50 and 150
        plate.style.setProperty("--g", size + "px");
        plate.style.setProperty("--h", hue);
    });

    let imagesURLs = ["./images/Screenshot 2026-01-12 at 17.33.59.png",
                      "./images/Screenshot 2026-01-12 at 17.34.06.png",
                      "./images/Screenshot 2026-01-12 at 17.34.14.png",
                      "./images/Screenshot 2026-01-12 at 17.34.21.png",
                      "./images/Screenshot 2026-01-12 at 17.34.29.png",
                      "./images/Screenshot 2026-01-12 at 17.34.38.png",
                      "./images/Screenshot 2026-01-12 at 17.34.45.png",
                      "./images/Screenshot 2026-01-12 at 17.34.49.png",
                      "./images/Screenshot 2026-01-12 at 17.34.56.png",
                      "./images/Screenshot 2026-01-12 at 17.35.01.png"  ];


    let currentImageIndex = 0;
    const detailedImgDiv = document.querySelector(".detailed-img");
    const leftArrow = document.querySelector(".left-arrow");
    const rightArrow = document.querySelector(".right-arrow");
    leftArrow.addEventListener("click", () => {
        currentImageIndex = (currentImageIndex - 1 + imagesURLs.length) % imagesURLs.length;
        detailedImgDiv.style.backgroundImage = `url("${imagesURLs[currentImageIndex]}")`;
    });
    rightArrow.addEventListener("click", () => {
        currentImageIndex = (currentImageIndex + 1) % imagesURLs.length;
        detailedImgDiv.style.backgroundImage = `url("${imagesURLs[currentImageIndex]}")`;
    });





  canvas.addEventListener("mousedown", pointerDown);
  canvas.addEventListener("mouseup", pointerUp);
  canvas.addEventListener("mouseleave", pointerUp);
  canvas.addEventListener("mousemove", pointerMove);

  canvas.addEventListener("touchstart", pointerDown, { passive: false });
  canvas.addEventListener("touchend", pointerUp);
  canvas.addEventListener("touchcancel", pointerUp);
  canvas.addEventListener("touchmove", pointerMove, { passive: false });

  viewport.addEventListener("wheel", zoom, { passive: false });

  window.addEventListener("resize", () => {
    vw = window.innerWidth;
    vh = window.innerHeight;
    centerCanvas();
  });
</script>


</body>
</html>
